<!DOCTYPE html>
<!--<%@ Page Language="C#" %>-->
<!--    <%@ Register tagprefix="SharePoint" namespace="Microsoft.SharePoint.WebControls" assembly="Microsoft.SharePoint, -->
<!--	Version=15.0.0.0, Culture=neutral, -->
<!--	PublicKeyToken=71e9bce111e9429c" %>-->
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta content="width=device-width, initial-scale=1" name="viewport">	

	<title>Center for Oceans New Form</title>

	<!-- Bootstrap Core CSS -->
	<link rel="stylesheet" type="text/css" href="../SiteAssets/bootstrap/css/bootstrap.min.css">

	<!-- CI CSS -->
	<link rel="stylesheet" type="text/css" href="../SiteAssets/css/mq.css">

	<!-- CI Header CSS -->
	<link rel="stylesheet" type="text/css" href="../SiteAssets/css/customHeaderGlobal.css">

	<!-- Custom CSS -->
	<link rel="stylesheet" type="text/css" href="../SiteAssets/css/custom.css">

</head>

<body class="with-desktop-header" style="background-color:#fff">
	<!-- SharePoint security validation aspx controls -->
	<!-- https://msdn.microsoft.com/en-us/library/office/ms472879%28v=office.14%29.aspx -->
	<form id="Form1" method="post" runat="server">
		<!--<SharePoint:FormDigest ID="FormDigest1" runat="server"></SharePoint:FormDigest>-->
	</form>
	<!-- #Form1 -->

	<header role="banner" class="introCopy global-header--desktop js-global-header--desktop">
		<div class="header-row bg-dark contain">
			<ul class="secondary-nav">
				<li class="secondary-nav__social"><a class="icon-facebook" href="https://www.facebook.com/conservation.intl"><span class="screen-reader">Facebook</span></a></li>
				<li class="secondary-nav__social"><a class="icon-twitter" href="https://twitter.com/conservationorg"><span class="screen-reader">Twitter</span></a></li>
				<li class="secondary-nav__social"><a class="icon-youtube" href="http://www.youtube.com/user/ConservationDotOrg"><span class="screen-reader">YouTube</span></a></li>
				<li class="secondary-nav__social"><a class="icon-instagram" href="http://instagram.com/conservationorg"><span class="screen-reader">Instagram</span></a></li>
				<li class="secondary-nav__text"><a href="http://blog.conservation.org/">Blog</a></li>
			</ul>
		</div>
		<div class="header-row contain">
			<h1>
				<a href="http://www.conservation.org/">
					<span class="logomark">Conservation International</span>
				</a>
			</h1>
			<ul class="primary-nav">
				<li class="text-uppercase">
					<a href="index.html">Center for Oceans<br/>
						<!--<span class="text-lowercase bodyCopy"> Return to homepage</span>-->
					</a>
				</li>
				<li class="text-uppercase active">
					<a href="form.html">New Grant Form<br/>
						<!--<span class="text-lowercase bodyCopy"> Submit new grant or gift opportunity</span>-->
					</a>
				</li>
				<li class="text-uppercase">
					<a href="#">Shortfall<br/>
						<!--<span class="text-lowercase bodyCopy"> View the status of the current year's shortfall</span>-->
					</a>
				</li>
				<li class="text-uppercase">
					<a href="dashboardDC.html">Fiscal Year Dashboard<br/>
						<!--<span class="text-lowercase bodyCopy"> View the accrual-based dashboard by fiscal year</span>-->
					</a>
				</li>
				<li class="text-uppercase">
					<a href="#">Projections<br/>
						<!--<span class="text-lowercase bodyCopy"> View revenue projections for the next five fiscal years</span>-->
					</a>
				</li>
				<li class="text-uppercase hidden">
					<a href="https://conservation.sharepoint.com/teams/units/mcso/fundraising-dashboard/_layouts/15/viewlsts.aspx">Site Contents<br/>
						<!--<span class="text-lowercase bodyCopy"> Read, edit, and update dashboard data through Site Contents</span>-->
					</a>
				</li>
			</ul>
		</div>
	</header>

	<div class="container-fluid">
		<div class="row">
			<!-- main page content -->
			<div class="col-sm-12 main">
				
				<!-- page header -->
				<div class="row title1">
					<div class="col-sm-12 col-md-12">
						<div style="padding-top:25px">
							<span>New Grant Form</span>
						</div>
					</div>
				</div>

                <!-- body -->
                <div class="row introCopy">
					<div class="col-xs-12">
						<div class="panel panel-default">
							<div class="panel-heading text-uppercase">
								Enter a New Commitment
							</div>
							<!-- /.panel-heading -->
							<div class="panel-body">
								<!-- Start of form container -->
								<div class="container-fluid">
									<div class="row-fluid">
										<div class="span4 offset4 welly">
											<div id="donorSubmit" class="form-horizontal" data-toggle="validator">
												<fieldset>
													<!-- Program select input, and Fiscal year select input -->
													<div class="form-group">
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="program">Program</label>
															<div>
																<select type="text" id="program" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the program the commitment will benefit" title="Program" placeholder="Select a program" required="required"></select>
															</div>
														</div>
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="fiscalYear">Fiscal Year</label>
															<div>
																<select type="text" id="fiscalYear" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the fiscal year the commitment will occur" title="Fiscal Year" placeholder="" required="required"></select>
															</div>
														</div>
													</div>

													<!-- Donor text input and Donor Type select input -->
													<div class="form-group">
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="donorType">Donor Type</label>
															<div>
																<select type="text" id="donorType" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the category for this type of donor" title="Donor Type" placeholder="" required="required"></select>
															</div>
														</div>
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="donor">Donor</label>
															<div>
																<select type="text" id="donor" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the name of the donor who is giving the commitment" title="Donor" placeholder="Name of Donor"
																	required="required"></select>
															</div>
														</div>
													</div>

													<!-- Project and Field Site select inputs -->
													<div class="form-group">
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="project">Project</label>
															<div id="projectContainer">
																<input type="text" id="project" class="form-control typeahead" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Enter the name of the project the commitment will benefit" title="Project" placeholder="Name of Project"
																	required="required">
															</div>
														</div>
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="fieldSite">Field Site</label>
															<div>
																<select type="text" id="fieldSite" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the field site related that is working with the program to implement the grant" title="Field Site"
																	placeholder="Field Site" required="required"></select>
															</div>
														</div>
													</div>

													<!-- Funding Status and Duration select inputs -->
													<div class="form-group">
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="fundingStatus">Funding Status</label>
															<div>
																<select type="text" id="fundingStatus" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the funding status for this commitment" title="Funding Status" placeholder="" required="required"></select>
															</div>
														</div>
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="duration">Number of Years</label>
															<div>
																<select type="text" id="duration" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Select the number of fiscal years the grant funds will be disbursed" title="Duration" placeholder="Number of Years"
																	required="required"></select>
															</div>
														</div>
													</div>

													<!-- Notes text input -->
													<!-- Program, Field Site, and Total Comitmment inputs -->
													<div class="form-group">
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="notes">Notes</label>
															<div id="projectContainer">
																<textarea id="notes" rows="7" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Enter any key notes that describe this commitment" title="Notes" placeholder="Notes"></textarea>
															</div>
														</div>
														<div class="col-xs-6">
															<label class="form-label text-uppercase" for="budgetCommitment">Program Commitment</label>
															<div class="input-group">
																<div class="input-group-addon">$</div>
																<input id="budgetCommitment" type="text" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Enter the amount in dollars the portion of the commitment allotted to the Ocean Center" title="Program Commitment"
																	placeholder="Program Commitment">
																<!--<div class="input-group-addon">.00</div>-->
															</div>
															<label class="form-label text-uppercase" for="fieldSiteCommitment">Field Site Commitment</label>
															<div class="input-group">
																<div class="input-group-addon">$</div>
																<input id="fieldSiteCommitment" type="text" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="Enter the amount in dollars the portion of the commitment allotted for other purposes"
																	title="Field Site Commitment" placeholder="Field Site Commitment">
																<!--<div class="input-group-addon">.00</div>-->
															</div>
															<label class="form-label text-uppercase" for="totalCommitment">Total Commitment</label>
															<div class="input-group">
																<div class="input-group-addon">$</div>
																<input id="totalCommitment" type="text" class="form-control" data-container="body" data-toggle="popover" data-placement="top" data-trigger="hover" data-content="This is the total amount in dollars of the commitment as the sum of commitments to the Ocean Center and for other purposes"
																	title="Total Commitment" placeholder="Total Commitment" disabled="disabled">
																<!--<div class="input-group-addon">.00</div>-->
															</div>
														</div>
													</div>
													<div class="form-group">
														<!--<button type="button" class="btn btn-default" data-dismiss="modal">Save</button>-->
														<button id="btnSubmit" type="submit" class="btn btn-primary pull-right text-uppercase" data-dismiss="modal">Submit</button>
													</div>
												</fieldset>
												<!-- fieldset -->
											</div>
											<!-- #donorSubmit -->
										</div>
										<!-- /.span4 -->
									</div>
									<!-- /.row-fluid -->
								</div>
								<!-- /.container-fluid -->
							</div>
							<!-- /.panel-body -->
						</div>
						<!--  /.panel-default -->
					</div>
					<!-- /.col-xs-12 -->
				</div>
				<!-- /.row -->
			</div>
			<!-- /.main -->
			<!-- Success Modal -->
			<div class="modal fade" id="successModal" tabindex="-1" role="dialog" aria-labelledby="successModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                            </button>
							<h4 class="modal-title" id="successModalLabel">Success</h4>
						</div>
						<div class="modal-body">
							Your Commitment Has Been Submitted
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default text-uppercase" data-dismiss="modal" onclick="location.href='dashboardDC.html'" >Close</button>
						</div>
					</div>
				</div>
			</div>
			<!-- #successModal -->
		</div>
		<!-- /.row -->
	</div>
	<!-- /.container-fluid -->

	<!-- SharePoint Core JavaScript -->
	<!--<script type="text/javascript" src="/_layouts/15/MicrosoftAjax.js"></script>-->
	<!--<script type="text/javascript" src="/_layouts/1033/init.js"></script>-->
	<!--<script type="text/javascript" src="/_layouts/sp.core.js"></script>-->
	<!--<script type="text/javascript" src="/_layouts/sp.runtime.js"></script>-->
	<!--<script type="text/javascript" src="/_layouts/sp.js"></script>-->

	<!-- jQuery -->
	<script type="text/javascript" src="../SiteAssets/jquery/jquery-1.12.1.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script type="text/javascript" src="../SiteAssets/bootstrap/js/bootstrap.min.js"></script>

	<!-- Moment Core JavaScript -->
	<script type="text/javascript" src="../SiteAssets/moment/moment.js"></script>

	<!--<script type="text/javascript" src="../SiteAssets/js/validator.js"></script>-->
	<script type="text/javascript" src="../SiteAssets/typeahead/typeahead.jquery.min.js"></script>
	<script type="text/javascript" src="../SiteAssets/js/getUser.js"></script>	
	<script type="text/javascript" src="../SiteAssets/js/addCommas.js"></script>
	<script type="text/javascript" src="../SiteAssets/js/getDropdownValues.js"></script>
	<script type="text/javascript" src="../SiteAssets/js/sendRequest.js"></script>

	<script type="text/javascript">
		$(document).ready(function() {

			getData();

			function convertToNumber() {
				var total = 0;
				var oceanTotal = parseFloat($('#budgetCommitment').val().replace(/,/g, '')) || 0;
				var otherTotal = parseFloat($('#fieldSiteCommitment').val().replace(/,/g, '')) || 0;

				total = oceanTotal + otherTotal;
				$('#budgetCommitment').val(addCommas(oceanTotal));
				$('#fieldSiteCommitment').val(addCommas(otherTotal));
				$('#totalCommitment').val(addCommas(total));
			}

			$(function() {
				bindSubmitButtonClick();
			});

			function bindSubmitButtonClick() {
				$("#btnSubmit").on("click", function() {
					sendRequest();
				});
			}

			// initiatlize Bootstrap popover
			$('[data-toggle="popover"]').popover();

			//initialize Bootstrap validator
			// $('#donorSubmit').validator({disable: true});

			//running total for #totalCommitment
			$('#budgetCommitment').keyup(convertToNumber);

			//running total for #totalCommitment
			$('#budgetCommitment').change(convertToNumber);

			//running total for #totalCommitment
			$('#fieldSiteCommitment').keyup(convertToNumber);

			//running total for #totalCommitment
			$('#fieldSiteCommitment').change(convertToNumber);

		});
	</script>

</body>